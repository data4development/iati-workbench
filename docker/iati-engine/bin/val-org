#!/bin/bash
if [ "$1." = "-?." ]; then
  cat <<EOT

$(basename $0) <file>

Validate the given file against the IATI activities standard.

EOT
# a hack: if the file doesn't exist, then we assume we're running in the container
# also: we assume the rest of the command line is a single filename, possibly with spaces
else
  if [ -f "$@" ]; then
    FILE="$@"
  else
    FILE="/workspace/$@"
  fi

  B=$(basename "$FILE")
  xmlstarlet val -e -s /root/lib/schemata/2.02/iati-organisations-schema.xsd "$FILE"
fi
